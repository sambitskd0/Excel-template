<div>
  <div class="pageHeading">
          <div class="heading__tab d-flex justify-content-end">
              <div class="tab__section">
                  <a routerLink="./../../viewTeacherTransfer"  class="tablink" routerLinkActive="active">Transfer Request Approval <br> शिक्षक अनुरोध</a>
                  <a routerLink="./../../transferRequestSchool/viewTransferRequestSchool"  class="tablink" routerLinkActive="active">Transfer Request By School <br> विद्यालय द्वारा स्थानांतरण अनुरोध</a>
                  <a routerLink="./../../relieving/viewRelieving"  class="tablink" routerLinkActive="active">Relieving <br> विरमित</a>
                  <a routerLink="./../../joiningSchool/viewJoiningSchool"  class="tablink" routerLinkActive="active">Joining School <br> विद्यालय में शामिल होना</a>
              </div>
          </div>
          <div class="heading__tab mt-2">
            <div><h3 class="pageName">Joining School / स्कूल जुड़ना</h3>  </div>
          </div>
          <div class="tabArea">
                  <!-- <a routerLink="./../addRelieving"  class="neuro addLink" routerLinkActive="active" ><i class="bi bi-plus-lg me-2"></i>Add</a> -->
                  <!-- <a routerLink="./../viewRelieving"  class="neuro addLink" routerLinkActive="active" ><i class="bi bi-eye me-2"></i>View</a> -->
          </div>
  </div>
      <form name="form" class="form-horizontal" (ngSubmit)="onSearch()" #searchForm="ngForm" novalidate>
      <div class="top-space" id="searchbox">
          <ng-container *ngIf="show">
              <div class="search-container">
                  <div class="search-sec" id="searchPanel" style="display: block;">
                    <div class="searchPanel">
                      <div class="row">
                        <div class="col-lg-2 form-group">
                              
                                    <label class="form-label">District <br> जिला</label>
                                
                            </div>
                            <div class="col-lg-3 form-group">
                                
                                    <span class="colon">:</span>
                                    <select class="form-control" aria-label="Default select example" [(ngModel)]="searchDistrictId" name="searchDistrictId" autocomplete="off" (change)="getBlock($any($event.target).value)">
                                      <option value="" *ngIf="scDisrtictSelect==true">--- Select ---</option>
                                      <option value="" *ngIf="scDisrtictLoading==true">Loading...</option>
                                      <option *ngFor="let districtItem of searchDistrictData" [value]="districtItem.districtId">
                                        {{ districtItem.districtCode }} - {{ districtItem.districtName }}
                                      </option>
                                    </select>
                               
                            </div>
            
                            <div class="col-lg-1"></div>
            
                            <div class="col-lg-2 form-group">
                                
                                    <label class="form-label">Block <br> प्रखण्ड</label>
                               
                            </div>
                            <div class="col-lg-3 form-group">
                               
                                    <span class="colon">:</span>
                                    <select class="form-control" aria-label="Default select example" [(ngModel)]="searchBlockId" name="searchBlockId" autocomplete="off" (change)="getCluster($any($event.target).value)">
                                      <option value="" *ngIf="scBlockSelect==true">--- Select ---</option>
                                      <option value="" *ngIf="scBlockLoading==true">Loading...</option>
                                      <option *ngFor="let blockItem of searchBlockData" [value]="blockItem.blockId">
                                        {{ blockItem.blockCode }} - {{ blockItem.blockName }}
                                      </option>
                                    </select>
                            </div>

                            <div class="col-lg-1"></div>

                            <div class="col-lg-2 form-group">
                                
                              <label class="form-label">Cluster <br> संकुल</label>
                         
                      </div>
                      <div class="col-lg-3 form-group">
                         
                              <span class="colon">:</span>
                              <select class="form-control" aria-label="Default select example" [(ngModel)]="searchClusterId" name="searchClusterId" autocomplete="off">
                                <option value="" *ngIf="scClusterSelect==true">--- Select ---</option>
                                <option value="" *ngIf="scClusterLoading==true">Loading...</option>
                                <option *ngFor="let clusterItem of clusterData" [value]="clusterItem.clusterId">
                                  {{ clusterItem.clusterCode }} - {{ clusterItem.clusterName }}
                                </option>
                              </select>
                      </div>

                      <!-- <div class="col-lg-1"></div>
                           
                      <div class="col-lg-2 form-group">
                        <label for="" class="form-label">School Category</label>
                    </div>
                    <div class="col-lg-3 form-group">
                        <span class="colon">:</span>
                        <select class="form-select"  [(ngModel)]="searchSchoolCategoryId" name="searchSchoolCategoryId" autocomplete="off">
                          <option value="" *ngIf="scSchoolCategorySelect == true">--- Select ---</option>
                          <option value="" *ngIf="scSchoolCategoryLoading == true">Loading...</option>
                          <option *ngFor="let item of schoolCatData"  [value]="item.code">{{ item.schlCatName  }}</option>
                        </select>
                    </div> -->
                                <div class="col-lg-1"></div>
                
                                <div class="col-lg-2 form-group">
                                    
                                        <label class="form-label">School <br> विद्यालय</label>
                                    
                                </div>
                                <div class="col-lg-3 form-group">
                                    
                                        <span class="colon">:</span>
                                        
                                        <select class="form-control" aria-label="Default select example" [(ngModel)]="searchSchoolId" name="searchSchoolId" autocomplete="off">
                                          <option value="" *ngIf="scSchoolSelect==true">--- Select ---</option>
                                          <option value="" *ngIf="scSchoolLoading==true">Loading...</option>
                                          <option *ngFor="let schoolItem of getSchoolData" [value]="schoolItem.schoolId">
                                            {{ schoolItem.schoolUdiseCode }} - {{ schoolItem.schoolName }}
                                          </option>
                                        </select>
                                   
                                </div>

                                <div class="col-lg-1"></div>
                                <div class="col-md-2 form-group">
                                <label for="exampleInputEmail1" class="form-label">Designation <br> पद</label>
                                </div>
                                <div class="col-md-3 form-group">
                                <span class="colon">:</span>
                                <select class="form-select" aria-label="Default select example" [(ngModel)]="searchTeacherTitle"
                                    name="searchTeacherTitle">
                                    <option value="" *ngIf="teacherTitleChanged==false">-- Select --</option>
                                    <option value="" *ngIf="teacherTitleChanged==true">Loading...</option>
                                    <option *ngFor="let title of teacherTitles" [value]="title.anxtValue">
                                      {{ title.anxtName }}
                                    </option>
                  
                                  </select>
                                
                                </div>

                                <div class="col-lg-1"></div>

                                <div class="col-lg-2 form-group">
                                    
                                  <label class="form-label">Teacher Name <br> शिक्षक का नाम</label>
                              
                          </div>
                          <div class="col-lg-3 form-group">
                              
                                  <span class="colon">:</span>
                                  <select class="form-select" aria-label="Default select example" name="teacherId" [(ngModel)]="searchTeacherId">
                                    <option value="" *ngIf="teacherChanged == false" selected>--Select--</option>
                                    <option value="" *ngIf="teacherChanged == true">Loading...</option>
                                    <option *ngFor="let item of teacherdropdownList" [value]="item.tId">{{ (item?.teacherCode) ? (item?.teacherCode) : (item?.teacherLoginCode)}}- {{ item.teacherName }}</option>
                                  </select>
                             
                          </div>
                               
                                   
                                  
                                    
                        <div class="col-lg-2">
                            <button class="btn btn-default btn-purple"> Search <i class="bi bi-search"></i></button>
                        </div>
                    </div>
                    </div>
                 </div>
                  
              </div>
              </ng-container>
  </div>
</form>
<button class="searchopen" (click)="toggle()" id="hide" data-toggle="tooltip" data-original-title="Click me"><i
  class="bi bi-caret-down-fill"></i><i class="bi bi-caret-up-fill"></i>Search Panel / खोज पट्टिका</button>
  
     


          <div class="clearfix"></div>
            
              <div class="row mt-4">
                <div class="col-lg-12">
                  <div class="page__rightarea">
                    <div class="page__util">
                        <div class="util">
                            
                            <a title="Excel" class="excel"><i class="bi bi-file-earmark-excel"></i></a>
                            <a title="Print" class="print" (click)="printPage()"><i class="bi bi-printer"></i></a>
                        </div>
                    </div>
                    </div>
                    <div id="viewTable" class="mt-4" [hidden]="filterData.teacherList?.length === 0">
                      <div class="table-responsive">
                        <mat-progress-bar
                          mode="indeterminate"
                          *ngIf="matTable.isLoading"
                        ></mat-progress-bar>
                        <table
                          class="mat-elevation-z8"
                          mat-table
                          [dataSource]="matTable.dataSource"
                          matSort
                          matTableExporter
                          #exporter="matTableExporter"
                        >
                          
                        
                        <ng-container matColumnDef="slNo">
                          <th
                            mat-header-cell
                            *matHeaderCellDef
                            mat-sort-header
                            class="bg-lightpurple"
                          >
                          #
                          </th>
                          <td mat-cell *matCellDef="let element">{{ element?.slNo }}</td>
                        </ng-container>
                          <ng-container matColumnDef="teacherCode">
                            <th
                              mat-header-cell
                              *matHeaderCellDef
                              mat-sort-header
                              class="bg-lightpurple"
                            >
                            Teacher Code / Teacher Login Code शिक्षक कोड / शिक्षक लॉगिन कोड
                            </th>
                            <td mat-cell *matCellDef="let element">
                              {{ (element?.teacherCode) ? (element?.teacherCode) : (element?.teacherLoginCode)}}
                            </td>
                          </ng-container>
                          <ng-container matColumnDef="teacherName">
                            <th
                              mat-header-cell
                              *matHeaderCellDef
                              mat-sort-header
                              class="bg-lightpurple"
                            >
                            Name / नाम
                            </th>
                            <td mat-cell *matCellDef="let element">
                              <!-- {{ (element?.teacherName) ? element?.teacherName" : '--'}} -->
                              {{ element?.teacherName}}
                            </td>
                          </ng-container>
                          <ng-container matColumnDef="teacherTitle">
                            <th
                              mat-header-cell
                              *matHeaderCellDef
                              mat-sort-header
                              class="bg-lightpurple"
                            >
                            Designation / पद
                            </th>
                            <td mat-cell *matCellDef="let element">
                              <!-- {{ (element?.teacherTitle) ? element?.teacherTitle" : '--'}} -->
                              {{ element?.teacherTitle}}
                            </td>
                          </ng-container>

                          <ng-container matColumnDef="natureOfAppointment">
                            <th
                              mat-header-cell
                              *matHeaderCellDef
                              mat-sort-header
                              class="bg-lightpurple"
                            >
                            Nature of Appointment / नियुक्ति की प्रकृति
                            </th>
                            <td mat-cell *matCellDef="let element">
                              <!-- {{ (element?.natureOfAppointment) ? element?.natureOfAppointment" : '--'}} -->
                              {{ element?.natureOfAppointment }}
                            </td>
                          </ng-container>                           
                          <ng-container matColumnDef="doj">
                            <th
                              mat-header-cell
                              *matHeaderCellDef
                              mat-sort-header
                              class="bg-lightpurple"
                            >
                            Date of joining in current school / वर्तमान विद्यालय में नियुक्ति की तिथि
                            </th>
                            <td mat-cell *matCellDef="let element">
                              <!-- {{ (element?.natureOfAppointment) ? element?.natureOfAppointment" : '--'}} -->
                              {{ (element?.serviceJoiningDt) ? (element?.serviceJoiningDt | date:'dd-MMM-yyyy') : '--'  }}
                            </td>
                          </ng-container>
                          <ng-container matColumnDef="joiningDate">
                            <th
                              mat-header-cell
                              *matHeaderCellDef
                              mat-sort-header
                              class="bg-lightpurple"
                            >
                            Joining Date / कार्यग्रहण तिथि
                            </th>
                            <td mat-cell *matCellDef="let element">
                              <!-- {{ (element?.natureOfAppointment) ? element?.natureOfAppointment" : '--'}} -->
                             {{ (element?.joiningDate) ? (element?.joiningDate | date:'dd-MMM-yyyy') : '--'  }}
                            </td>
                          </ng-container>

                         <ng-container matColumnDef="action">
                          <th mat-header-cell *matHeaderCellDef mat-sort-header class="bg-lightpurple noPrint">
                            Actions / कार्रवाई करें
            
                          </th>
                          <td mat-cell *matCellDef="let element" class="noPrint"><a
                              *ngIf="(element?.joiningDate == '' || element?.joiningDate == null)" class="btn btn-info me-2"
                              data-bs-toggle="modal" data-bs-target="#exampleModal"
                              (click)="showDetails(element?.teacherId,element?.transnferRequestId)">Update Joining Date</a>
                              <a class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#viewDetailsModal"
                  (click)="viewDetails(element?.teacherId,element?.transnferRequestId)">Details</a>
                          </td>
                        </ng-container>
                          
                  
                          <tr mat-header-row *matHeaderRowDef="matTable.displayedColumns"></tr>
                          <tr
                            mat-row
                            *matRowDef="let row; columns: matTable.displayedColumns"
                          ></tr>
                        </table>
                  
                        <mat-paginator
                          #paginator
                          [length]="matTable.totalRows"
                          [pageIndex]="matTable.currentPage"
                          [pageSize]="matTable.pageSize"
                          [pageSizeOptions]="getPageSizeOptions"
                          (page)="onPageChange($event)"
                          aria-label="Select page"
                          class="noPrint"
                          showFirstLastButtons
                        ></mat-paginator>
                      </div>
                    </div>
                    <div class="alert alert-info text-center  fw-bold" role="alert" *ngIf="isNorecordFound">
                      {{ "No record found." }}
                   </div>
                   <div class="alert alert-info text-center  fw-bold" role="alert" *ngIf="isInitAdmin">
                      {{ "Please Search to find list" }}
                   </div>
                </div>
              </div>
            </div>






            <!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
<div class="modal-dialog modal-xl">
  <form [formGroup]="takeActionForm">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Joining School / स्कूल ज्वाइन करना</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">          
        <div class="row">
          <div class="col-md-2 form-group">
            <div class="">
              <label for="exampleInputEmail1" class="form-label">Joining Date<br>कब से अवकाश
              </label>
            </div>
          </div>

          <div class="col-md-4 form-group">
            <div class="">
              <span class="colon">:</span>
              <input class="form-control" #datepickerYMD="bsDatepicker" placeholder="DD-MMM-YYYY" bsDatepicker
                  [bsConfig]="{ dateInputFormat: 'DD-MMM-YYYY',showClearButton: true, clearPosition: 'right'}"
                  formControlName="joiningDate"  autocomplete="off" readonly>                  
            </div>
            <span class="mandatory">*</span>
          </div>                        
        </div>          
        <div class="modal-footer">
          <button type="Submit" class="btn btn-success" (click)="submitTakeAction()">Submit</button>
          </div>
      </div>

      

    </div>
  </form>
</div>
</div>

<!-- -----------------------------------------------------------------view modal----------------------------------------------------------------- -->
<div class="modal fade" id="viewDetailsModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
<div class="modal-dialog modal-xl">
  <div class="modal-content">
    <div class="modal-header">
      <h5 class="modal-title" id="exampleModalLabel">View Transfer Details / स्थानांतरण विवरण देखें </h5>
      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
    </div>
    <!-- <input type="hidden" formControlName="teacherIdModal"> -->
    <div class="modal-body p-4">

     <div class="row">
        <div class="col-lg-2 form-group">
          <label for="" class="form-label"> Teacher Name</label>
        </div>
        <div class="col-lg-3 form-group  colon-top">
          <span class="colon">:</span>
          <label class="label-data fw-bold"> {{ (serviceModalCurrentData[0]?.teacherName) ? serviceModalCurrentData[0]?.teacherName : "--" }}</label>
        </div>
        <div class="col-lg-1"></div>
        <div class="col-lg-2 form-group">
          <label for="" class="form-label"> Teacher Code</label>
        </div>
        <div class="col-lg-3 form-group  colon-top">
          <span class="colon">:</span>
          <label class="label-data fw-bold">{{ (serviceModalCurrentData[0]?.teacherCode) ? serviceModalCurrentData[0]?.teacherCode : serviceModalCurrentData[0]?.teacherLoginCode }}</label>
        </div> 
        <div class="col-lg-1"></div>
        <div class="col-lg-2 form-group">
              <label for="" class="form-label">Designation</label>
        </div>
        <div class="col-lg-3 form-group colon-top">
              <span class="colon">:</span>
              <label class="label-data fw-bold">{{ (serviceModalCurrentData[0]?.teacherTitle) ? serviceModalCurrentData[0]?.teacherTitle : "--" }}</label>
        </div>
        <div class="col-lg-1"></div>
        <div class="col-lg-2 form-group">
              <label for="" class="form-label">Nature of Appointment</label>
        </div>
        <div class="col-lg-3 form-group colon-top">
              <span class="colon">:</span>
              <label class="label-data fw-bold">{{ (serviceModalCurrentData[0]?.natureofAppointment) ? serviceModalCurrentData[0]?.natureofAppointment: "--" }}</label>
        </div>            
      </div>
      <div class="row">
        <div class="table-responsive">
          <table class="table  table-bordered">
            <thead class="bg-lightpurple">
              <tr>
                <th colspan="5" class="text-center">Relieving From / से विरमित</th>
              </tr>
              <tr>
                <th >District / जिला </th>
                <th >Block / प्रखण्ड</th>
                <th >Cluster / संकुल</th>
                <th >School Category / विद्यालय की श्रेणी</th>
                <th >School / विद्यालय</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let data of serviceModalCurrentData;let i = index;">
                <td scope="row">{{(data?.cdistrictName) ? data?.cdistrictName :'--'}}</td>
                <td scope="row">{{(data?.cblockName) ? data?.cblockName :'--'}}</td>
                <td scope="row">{{ (data?.cclusterName) ? data?.cclusterName :'--'}}</td>   
                <td scope="row">{{(data?.cschlCatName) ? data?.cschlCatName :'--'}}</td>
                <td scope="row">{{(data?.cschoolName) ? data?.cschoolName :'--'}}</td>               
              </tr>
            </tbody>

          </table>
        </div>
      </div>
      

      <div class="row">
        <div class="table-responsive">
          <table class="table  table-bordered">
            <thead class="bg-lightpurple">
              <tr>
                <th colspan="5" class="text-center">Relieving To / करने के लिए विरमित</th>
              </tr>
              <tr>
                <th >District / जिला </th>
                <th >Block / प्रखण्ड</th>
                <th >Cluster / संकुल</th>
                <th >School Category / विद्यालय की श्रेणी</th>
                <th >School / विद्यालय</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let data of serviceModalCurrentData;let i = index;">
                <td scope="row">{{(data?.tdistrictName) ? data?.tdistrictName :'--'}}</td>
                <td scope="row">{{(data?.tblockName) ? data?.tblockName :'--'}}</td>
                <td scope="row">{{ (data?.tclusterName) ? data?.tclusterName :'--'}}</td>   
                <td scope="row">{{(data?.tschlCatName) ? data?.tschlCatName :'--'}}</td>
                <td scope="row">{{(data?.tschoolName) ? data?.tschoolName :'--'}}</td>               
              </tr>
            </tbody>

          </table>
        </div>
      </div>
      <div class="alert alert-info text-center fw-bold" role="alert" *ngIf="isNoCurrentrecordFoundModal">
        {{ "No record found." }}
      </div>
      
    </div>
  </div>
</div>
</div>